<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
		<title>Ionic App</title>
		<link href="css/ionic.app.min.css" rel="stylesheet">
		<link href="css/style.css" rel="stylesheet">
		<link href="css/myStyle.css" rel="stylesheet">
		<link rel="stylesheet" href="css/ZapfDingbats.css">
		<script src="lib/ionic/js/ionic.bundle.js"></script>
		<script src="js/ng-cordova.js"></script>
		<script src="cordova.js"></script>
		<script src="js/app.js"></script>
		<script src="js/share.js"></script>
		<script src="js/fileTransfer.js"></script>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
		<script src="js/jquery.jsonp-2.3.0.min.js "></script>
		<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
		<script type="text/javascript">
            function JSONProcess() {
                $.getJSON("https://dl.dropboxusercontent.com/u/1403240/staj/metadata.json", function(data) {
                    deviceName = data.deviceName;
                    var raspiCamCount = data.raspiCamCount;

                    for (var i = 0; i < raspiCamCount; i++) {
                        URLs[i] = data.cams[i].url;
                        URLs[0] = "http://www.personal-view.com/talks/uploads/FileUpload/39/5efeafb5213ce3433d0b2fc7fe72cb.jpg";
                        URLs[1] = "http://www.personal-view.com/talks/uploads/FileUpload/39/5efeafb5213ce3433d0b2fc7fe72cb.jpg";
                        URLs[2] = "http://1.bp.blogspot.com/-pPAGNyln86Y/Uindkpv87kI/AAAAAAAAI4I/pbUilrlqoOg/s1600/Tulips2.jpg";
                        URLs[3] = "http://www.steves-digicams.com/sdc-classic/qv2300/samples/07220016.jpg";
                        grids[i].srcImage = URLs[i];
                        grids[0].title = deviceName;
                        var fileName = "image";
                        var index = i.toString();
                        fileName = fileName + index;
                        download(URLs[i], "GrundigImages", fileName);
                    }

                });
            }

            function getTimeStamp() {
                return Date.now;
            }

            var URLs = [];
            var grids;
            var deviceName;
            grids = [{
                id : 0,
                srcImage : 'http://placehold.it/150x150',
                srcRaf : 'img/raf4_1.png',
                title : 'Images',
            }, {
                id : 1,
                srcImage : 'http://placehold.it/150x150',
                srcRaf : 'img/raf4_2.png',
            }, {
                id : 2,
                srcImage : 'http://placehold.it/150x150',
                srcRaf : 'img/raf4_3.png',
            }, {
                id : 3,
                srcImage : 'http://placehold.it/150x150',
                srcRaf : 'img/raf4_4.png',
            }];
            $(document).ready(function() {
                JSONProcess();

            });

            function clearContent(id) {
                alert("Clear");
                //  grids[0].srcImage = 'http://placehold.it/150x150';

                document.getElementById(id).innerHTML = "";
                alert("done");

            }

		</script>
		 
	</head>

	<body ng-app="starter"  class="background">

		<ion-nav-bar class="bar-light">

			<ion-nav-back-button class="button-clear">
				<i class="ion-arrow-left-c"> </i> Back
			</ion-nav-back-button>
		</ion-nav-bar>

		<ion-nav-view id="allBody">

		</ion-nav-view>

		<script id="index.html" type="text/ng-template">
			<ion-view title="" cache-view="false">

			<ion-content class="padding">

			<div>
			<img class="fixLogo" src="img/grundig-logo.png" width="80%" />
			</div>

			<div class="button-bar">
			<button class="button button-outline button-light icon-left ion-refresh" ng-click="changePage()">REFRESH</button>
			<!-- <a class="button button-outline button-positive icon-left ion-refresh"  nav-transition="android" href="#/images">REFRESH</a> -->
			<a class="button button-outline button-light icon-left ion-camera" nav-transition="android" href="#/images">TAKE PICTURE</a>
			</div>

			<div>
			<img class="fixImage" src="img/fridge.png" width="100%" />
			</div>

			</ion-content>

			</ion-view>
		</script>

		<script id="images.html" type="text/ng-template">
			<ion-view title="{{grids[0].title}}" id="imageTitle"  cache-view="false" >
			<ion-content  class="imgCenter">  <!--class="padding"-->
			<ion-refresher
			pulling-text="Pull to refresh..."
			on-refresh="doRefresh()">
			</ion-refresher>
			<div id="allImages">
			<div  class="row" ng-repeat="grid in grids" ng-if="$index % 2 === 0" ng-controller="ShareController">

			<div class="col col-50" ng-if="$index < grids.length">
			<img class="imgGrid" ng-click="openModal(grids[$index])" ng-src="{{grids[$index].srcImage}}">
			<img class="imgRaf" ng-src="{{grids[$index].srcRaf}}">
			</div>

			<div class="col col-50" ng-if="$index + 1 < grids.length">
			<img class="imgGrid" ng-click="openModal(grids[$index+1])" ng-src="{{grids[$index+1].srcImage}}">
			<img class="imgRaf" ng-src="{{grids[$index+1].srcRaf}}">

			</div>

			</div>
			</div>
			</ion-content>

			</ion-view>

		</script>
	</body>

</html>